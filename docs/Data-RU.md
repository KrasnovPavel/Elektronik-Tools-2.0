
# Введение

Все данные передаются в Elektronik в виде пакетов данных. Каждый пакет содержит:
1. Действие над данными:
    * Добавление (add)
    * Обновление (update)
    * Удаление (remove)
    * Очистка (clear)
    * Вывод информации (info)
2. Временную метку пакета (timestamp)
3. Флаг ключевого пакета (special)
4. Сообщение (message)
5. Набор соединений
6. Данные
    * Точки
    * Наблюдения
    * Линии
    * Отслеживаемые объекты

## Действия над данными

Всего над данными может быть совершено 4 действия:
1. Добавление (add). Этим действием необходимые объекты добавляются в карту. Необходимо отметить, что без добавления объектов в карту с ними невозможно будет взаимодействовать в дальнейшем. При попытке обращения к несуществующему объекту в Elektronik возникнет ошибка.
2. Обновление (update). Заменяет параметры объекта в соответствии с полученными данными.
3. Удаление (remove). Удаляет из карты объект.
4. Очистка (clear). Очищает карту соответствующего типа объектов.

## Временная метка

Временная метка используется в offline режиме работы Elektronik, она отображается на ползунке перемотки действий в нижнем правом углу экрана. В online режиме эта информация никак не используется.

## Флаг ключевого пакета

Флаг ключевого пакета используется в offline режиме, он предназначен для того, чтобы пропускать действия не представляющие интереса по нажатию кнопок отмотки до ближайшего ключевого пакета.

## Сообщение

Сообщение отображается в offline режиме для всех ключевых пакетов в правом верхнем углу экрана.

## Набор соединений

Набор соединений предназначен для отображения линий между объектами, такими как точки или наблюдения. Соединение представляет собой пару целочисленных значений содержащих id соединяемых объектов. На текущий момент соединения возможно установить только между объектами одного типа, т. е. нельзя соединить точку с наблюдением. Стоит отметить, что при обновлении объекта соединение также будет автоматически обновлено.

Набор соединений помимо собственно самих соединений также содержит действие. Действие может быть одно из двух:
* Добавление (add)
* Удаление (remove)

В обоих случаях действие может быть совершено только над присутствующими объектами в карте, при этом соединения имеют эффект только для обновления объектов. Например, чтобы добавить (удалить) соединение между двумя точками, необходимо послать пакет с действием обновления точек и действием добавления (удаления) для соединений. При этом соединения могут быть добавлены и без фактического обновления объектов, т. е. можно сформировать пакет в котором набор объектов будет пустым, а набор соединений - не пустым.

## Данные

На текущий момент существует 4 типа данных:
1. Точки
2. Наблюдения
3. Линии
4. Отслеживаемые объекты

Любой пакет должен содержать набор объектов одного указанного выше типа.

# C#

C примером взаимодействия с Elektronik можно ознакомиться в папке Examples/csharp в корне репозитория. Пример выполнен в виде Unit-тестов, перед запуском тестов необходимо запустить Elektronik в онлайн режиме, после запуска тестов в папке с исполняемыми файлами появится файл PointsStressTests.dat, который можно использовать в качестве демонстрации возможностей Elektronik в offline режиме.

# C++

C примером взаимодействия с Elektronik можно ознакомиться в папке Examples/cxx в корне репозитория. Пример выполнен в виде google tests Unit-тестов. Для сборки этого примера рекомендуется использовать [vcpkg](https://github.com/Microsoft/vcpkg).